import{a as $}from"./chunk-CUCOCEDF.js";import"./chunk-BNAEO53W.js";import{i as F,l as I,m as V,n as N,p as j,r as L}from"./chunk-C4IYMCUQ.js";import{$a as x,Ab as S,Ba as m,Bb as T,G as M,La as k,V as v,Xb as w,Yb as y,_ as l,ab as h,bb as O,cb as P,da as u,ea as f,hb as r,ib as o,jb as E,la as C,lb as g,mb as c,rb as i,s as b,t as D,tb as p}from"./chunk-CIOIUQ7L.js";var _=class n{firestore=l(F);messagesCollection=I(this.firestore,"contactMessages");getMessages(){let t=L(this.messagesCollection);return b(j(t)).pipe(M(e=>(console.error("Error fetching messages:",e),D(null))))}deleteMessage(t){let e=N(this.firestore,"contactMessages",t);return b(V(e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})};var B=(n,t)=>t.id;function Q(n,t){if(n&1){let e=E();r(0,"div",6)(1,"p"),i(2,"Are you sure?"),o(),r(3,"button",8),g("click",function(){u(e);let a=c().$implicit,d=c(2);return f(d.confirmDelete(a.id))}),i(4,"Yes"),o(),r(5,"button",9),g("click",function(){u(e);let a=c(3);return f(a.cancelDelete())}),i(6,"No"),o()()}}function R(n,t){if(n&1){let e=E();r(0,"button",10),g("click",function(){u(e);let a=c().$implicit,d=c(2);return f(d.requestDelete(a.id))}),i(1,"Delete"),o()}}function Y(n,t){if(n&1&&(r(0,"div",5)(1,"h3"),i(2),o(),r(3,"p")(4,"strong"),i(5,"Email:"),o(),i(6),o(),r(7,"p")(8,"strong"),i(9,"Message:"),o(),i(10),o(),r(11,"p")(12,"strong"),i(13,"Sent:"),o(),i(14),S(15,"date"),o(),x(16,Q,7,0,"div",6)(17,R,2,0,"button",7),o()),n&2){let e=t.$implicit,s=c(2);m(2),p("From: ",e.name),m(4),p(" ",e.email),m(4),p(" ",e.message),m(4),p(" ",T(15,5,e.timestamp,"medium")),m(2),h(s.messageToDelete()===e.id?16:17)}}function z(n,t){if(n&1&&(r(0,"div",4),O(1,Y,18,8,"div",5,B),o()),n&2){let e=c();m(),P(e.messages())}}function G(n,t){n&1&&(r(0,"p"),i(1,"No messages to display."),o())}var A=class n{authService=l($);messagesService=l(_);messages=C([]);messageToDelete=C(null);ngOnInit(){this.messagesService.getMessages().subscribe(t=>{if(t){let e=t.docs.map(s=>{let a=s.data(),d=a.timestamp.toDate();return{id:s.id,name:a.name,email:a.email,message:a.message,timestamp:d}});this.messages.set(e)}})}requestDelete(t){this.messageToDelete.set(t)}cancelDelete(){this.messageToDelete.set(null)}confirmDelete(t){this.messagesService.deleteMessage(t).subscribe({next:()=>{this.messages.set(this.messages().filter(e=>e.id!==t)),this.messageToDelete.set(null)},error:e=>{console.error("Error deleting message:",e),alert("There was an error deleting the message. Please check the browser console for more details."),this.messageToDelete.set(null)}})}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=k({type:n,selectors:[["app-dashboard"]],decls:11,vars:1,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"logout-button",3,"click"],[1,"messages-section"],[1,"messages-grid"],[1,"message-card"],[1,"confirmation"],[1,"delete-button"],[1,"confirm-button",3,"click"],[1,"cancel-button",3,"click"],[1,"delete-button",3,"click"]],template:function(e,s){e&1&&(r(0,"div",0)(1,"header",1)(2,"h1"),i(3,"Admin Dashboard"),o(),r(4,"button",2),g("click",function(){return s.logout()}),i(5,"Logout"),o()(),r(6,"section",3)(7,"h2"),i(8,"Contact Messages"),o(),x(9,z,3,0,"div",4)(10,G,2,0,"p"),o()()),e&2&&(m(9),h(s.messages().length>0?9:10))},dependencies:[y,w],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:2rem;font-family:sans-serif}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.logout-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.logout-button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.messages-section[_ngcontent-%COMP%]{margin-top:2rem}.messages-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.message-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;padding:1.5rem;box-shadow:0 2px 4px #0000001a}.message-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;color:#333}.message-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#555}.delete-button[_ngcontent-%COMP%]{background-color:#e91e63;color:#fff;padding:8px 16px;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease;margin-top:1rem}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c2185b}.confirmation[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#fff3f3;border:1px solid #e91e63;border-radius:5px;text-align:center}.confirmation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;margin-bottom:.5rem;color:#c2185b}.confirm-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease;margin:0 .5rem}.confirm-button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.confirm-button[_ngcontent-%COMP%]:hover{background-color:#388e3c}.cancel-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}"],changeDetection:0})};export{A as DashboardComponent};
